!function(e,t){"use strict";const r=e.umba||(e.umba={}),n=function(){function e(e){let t;"string"!=typeof e&&(e=JSON.stringify(e));try{e.trim().length>0||e.length>0?(e=e.replace(/^\s+|\s+$/gm,"").split("\n").join(""),t=(new DOMParser).parseFromString(e,"text/html").body.firstChild):t=(new DOMParser).parseFromString("<span></span>","text/html").body.firstChild}catch(e){throw Error("An error occurred, check your template data. We recommend console.log the template data.")}return{tree:t}}function t(t,r){return r instanceof Node==0&&(r=e(r)),r.tree&&(r=r.tree),t.nodeName===r.nodeName?(function(e,t){e.childNodes.length===t.childNodes.length?t.hasChildNodes()&&n(e.childNodes,t.childNodes):(e.parentNode.replaceChild(t,e),n(e,t)),function(e,t){if("function"==typeof e.getAttributeNames){let r=e.getAttributeNames(),n=t.getAttributeNames();if(JSON.stringify(r)!==JSON.stringify(n))Object.keys(n).forEach(r=>e.setAttribute(r,t.getAttribute(r)));else for(let r=0;r<n.length;r++){let o=n[r],i=e.getAttribute(o),a=t.getAttribute(o);i!==a&&("class"==o?a.split(" ").forEach(t=>{e.classList.add(t)}):e.setAttribute(o,a))}}}(e,t)}(t,r),t):(t.parentNode.replaceChild(r,t),r)}function n(e,r){for(let n=0;n<r.length;n++){const i=r[n],a=e[n];"#text"!==i.nodeName||"#text"!==a.nodeName?t(a,i):o(a,i)}}function o(e,t){e!==t&&(e.nodeValue=t.nodeValue)}return{createTree:e,mount:function t(n,o){if("function"==typeof n.tree)return function(n,o){const{tree:i,props:a}=n,u=new i(a);if(u instanceof r.Component){const r=e(u.render());return u._dom=r.tree,u.preLoad(),u._dom=t(r,o),u.onLoad(),u._dom}}(n,o);if(n.tree)return o.appendChild(n.tree);throw Error("Container Error: no such parentNode found!")},patch:t}}(),o={};r.nameComponent=function(e,t,r){if("string"!=typeof e||"function"!=typeof t)throw TypeError("You must pass a string component name and a valid component");o[e]||(r&&"string"==typeof r&&s[r]&&(r=s[r]),o[e]={component:t,middleware:r})};let i={};r.binding=function(e,t){return e?(t&&"function"!=typeof t&&(r.module.request.data[e]=t,i[e]=t),i[e]):i},r.global=new Proxy({},{set:function(e,t,r){if("function"!=typeof r)return e[t]=r,!0}}),r.setBindings=function(e=[]){let t=[];if(!Array.isArray(e))throw TypeError("Your bindings must be an array of strings");e.forEach(e=>{"string"==typeof e&&(t.push(e),i[e]&&delete r.module.request.data[e],i[e]="")}),a(t)};const a=function(e){e.forEach(function(e){let n=t.querySelectorAll(`[data-bind="${e}"]`);for(let t of n)t.onkeyup=function(){for(let t of n)"INPUT"==t.tagName?t.value=this.value:t.textContent=this.value,i[e]=this.value};Object.defineProperty(r.module.request.data,e,{configurable:!0,set:function(e){for(let t of n)"INPUT"==t.tagName?t.value=e:t.textContent=e}})})};r.render=function(e,t,r={}){if("function"==typeof e)return n.mount({tree:e,props:r},t);if(o[e]){let i=o[e];return i.middleware&&i.middleware(),n.mount({tree:o[e].component,props:r},t)}return n.mount(n.createTree(e),t)},r.patchDom=n.patch;let u=function(){let e={};return{on:function(t,n){if(!r.isString(t))throw Error("eventName must be a string.");e[t]=e[t]||[],e[t].push(n)},trigger:function(t,n={}){if(!e[t]||!r.isString(t))throw Error("No such event exists");{let r=e[t];Object.keys(r).forEach(e=>{r[e].notify({name:t,data:n})})}},remove:function(t,n){if(r.isString(t)){let r=e[t];for(let o=0;o<r.length;o++)r[o]===n&&e[t].splice(o,1)}}}}();r.subscribe=u.on,r.remove=u.remove,r.publish=u.trigger,r.data=function(e){return r.module.request.data[e]},r.serialize=function(){let e=[],t=r.module.request.data;for(let r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")},r.string={},r.string.replaceSpaceWith=function(e,t){return"string"==typeof e&&"string"==typeof t?e.replace(/ /g,t):e},r.string=new Proxy(r.string,{set:function(e,t,r){throw new TypeError("You cannot alter umba string")}}),r.isObject=function(e){return"object"==typeof e&&null!==e},r.isNumeric=function(e){let t=!Array.isArray(e)&&e-parseFloat(e)+1>=0;return!((isNaN(parseFloat(e))||!isFinite(e))&&!t)},r.isString=function(e){return("string"==typeof e||e instanceof String)&&!r.isNumeric(e)},r.isBoolean=function(e){return typeof e==typeof!0},r.toString=function(e){return JSON.stringify(e)},r.isUndefined=function(e){return void 0===e||!e||e.length<1},r.compareData=function(e,t){return!r.isUndefined(e)&&!r.isUndefined(t)&&(e=e.trim(),t=t.trim(),0==e.toLowerCase().localeCompare(t.toLowerCase()))},r.isEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},r.isSocial=function(e){return/^[0-9]{3}\-?[0-9]{2}\-?[0-9]{4}$/.test(e)},r.isPhone=function(e){return/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/.test(e)},r.isPatternMatch=function(e,t){let n=t.split(""),o=e.split(""),i=!1;if(n.length==o.length)for(let e=0;e<n.length;e++){let t=o[e];if("n"==n[e]?r.isNumeric(t)&&(i=!0):"a"==n[e]?r.isNumeric(t)||t!=t.toLowerCase()||(i=!0):"A"==n[e]?r.isNumeric(t)||t!=t.toUpperCase()||(i=!0):i=n[e]==t,!i)break}return i},r.isHTML=function(e){let r=t.createElement("div");r.innerHTML=e;for(let e=r.childNodes,t=e.length;t--;)if(1==e[t].nodeType)return!0;return!1},r.isElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};const s={};r.createMiddleware=function(e,t){if("string"!=typeof e||"function"!=typeof t)throw Error("name must be a string and action must be a function");s[e]||(s[e]=t)},r.middleware=function(e,t){let n=s[e];return n||(r.createMiddleware(e,t),n=s[e]),n},r.addElement=function(e,n,o,i){if(null==t.querySelector(`#${o}`)){let a=t.querySelector(e),u=t.createElement(n);return u.setAttribute("id",o),r.isHTML(i)?u.appendChild(i):u.appendChild(t.createTextNode(i)),a.appendChild(u),!0}return!1},r.removeElement=function(e,r){e=t.querySelector(e),r=t.querySelector(r),e.removeChild(r)};const c={};r.setStyle=function(e={}){let r=[];for(let n in e)if(c[n])"string"==typeof e[n]&&(t.querySelector(n).style.cssText=e[n]);else try{"string"==typeof e[n]&&(c[n]||(c[n]=t.querySelector(n).style.cssText),t.querySelector(n).style.cssText=e[n],r.push(n))}catch(e){}return r},r.removeStyle=function(e){Array.isArray(e)?e.forEach(e=>{"string"==typeof c[e]&&(t.querySelector(e).style.cssText=c[e],delete c[e])}):"string"==typeof e&&c[e]&&(t.querySelector(e).style.cssText=c[e],delete c[e])},r.clearStyles=function(){for(let e in c)r.removeStyle(e)},r.deepCopy=function(e){return JSON.parse(JSON.stringify(e))},r.shallowCopy=function(e){return Object.assign({},e)},r.equal=function(e,t){return"object"==typeof e&&(e=JSON.stringify(e)),"object"==typeof t&&(t=JSON.stringify(t)),e==t}}(window,document),umba.Component=class{constructor(e){if(new.target===umba.Component)throw new TypeError("You must extend the Component class.");let t=this;this.props=e||{},this._dom=void 0,this._children={},this._isChild=!1,this._parent=void 0,this._currentState={},this.state=new Proxy({},{set:function(e,r,n){if("function"!=typeof n)return e[r]?(e[r]=n,t._isChild?t.update():void 0!==t._dom&&JSON.stringify(t._currentState[r])!==JSON.stringify(e[r])&&(t._currentState[r]=n,t.update())):e[r]=n,!0;throw new TypeError("The value cannot be a function")}})}render(){}preLoad(){Object.keys(this._children).forEach(e=>{this._children[e].preLoad()})}onLoad(){Object.keys(this._children).forEach(e=>{this._children[e].onLoad()})}onUpdate(){Object.keys(this._children).forEach(e=>{this._children[e].onUpdate()})}registerState(e){let t=this;if(!umba.isObject(e))throw new TypeError("The provided state must be a JSON object");Object.keys(e).forEach(r=>{t.state[r]=e[r]})}subscribe(e){umba.subscribe(e,this)}publish(e,t){umba.publish(e,t)}removeEvent(e){umba.remove(e,this)}notify(e){}childComponent(e,t,r){return this._children[t]?this._children[t].props=r||this._children[t].props:(this._children[t]=new e(r),this._children[t]._isChild=!0,this._children[t]._parent=this),this._children[t].render()}getElement(e){let t=this.getElements(e);return void 0!==t?t[0]:t}getElements(e){if(this._isChild)return this._parent.getElements(e);if("function"==typeof this._dom.querySelector){let t=this._dom.querySelectorAll(e);return null!==t&&0!==t.length||!this._dom.parentNode?t:this._dom.parentNode.querySelectorAll(e)}return"function"==typeof this._dom.parentNode.querySelector?this._dom.parentNode.querySelectorAll(e):void 0}update(){if(this._isChild)this._parent.update();else if(void 0!==this._dom&&!this._isChild&&this._children!=={}){const e=this.render();this._dom=umba.patchDom(this._dom,e),this.onUpdate()}}abort(){return{undefined:void 0}}},umba.Component.prototype.toString=function(){return this.render()},umba.module=new Proxy({},{set:function(e,t,r){if("function"==typeof r||"object"==typeof r){if(!e[t])return e[t]=r,!0;throw new TypeError(`Module ${t} already exists!`)}throw new TypeError("Any additions to module must be a function or object.")}}),umba.module.datetime={getHoursBetween:function(e,t){return Math.abs(new Date(e)-new Date(t))/36e5},amPm:function(e){let t=new Date(e),r=(e=t.getHours()+" "+(t.getMinutes()<10?"0":"")+t.getMinutes()).substring(0,2),n=e.substring(3,5),o=r>=12?"pm":"am";return(r=(r%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+o},timeSince:function(e){e=new Date(e);let t={},r=Math.floor((new Date-e)/1e3),n=Math.floor(r/31536e3);return n>1&&(t.years=n),(n=Math.floor(r/2592e3))>1&&(t.months=n),(n=Math.floor(r/86400))>1&&(t.days=n),(n=Math.floor(r/3600))>1&&(t.hours=n),(n=Math.floor(r/60))>1&&(t.minutes=n),t.seconds=Math.floor(r),t},numeric_mdy:function(e){let t=new Date(e),r=t.getDate(),n=t.getMonth()+1;return r<10&&(r="0"+r),n<10&&(n="0"+n),n+"/"+r+"/"+t.getFullYear()},alpha_dmy:function(e){let t=(e=new Date(e)).getDate(),r=e.getMonth(),n=e.getFullYear();return t+", "+["January","February","March","April","May","June","July","August","September","October","November","December"][r]+", "+n},alpha_dmy2:function(e){let t=(e=new Date(e)).getDay(),r=e.getMonth(),n=e.getFullYear();return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]+", "+["January","February","March","April","May","June","July","August","September","October","November","December"][r]+" "+e.getDate()+" , "+n},alpha_mdy:function(e){let t=(e=new Date(e)).getDate(),r=e.getMonth(),n=e.getFullYear();return["January","February","March","April","May","June","July","August","September","October","November","December"][r]+" "+t+", "+n},alpha_mdy2:function(e){let t=(e=new Date(e)).getDay(),r=e.getMonth(),n=e.getFullYear();return["January","February","March","April","May","June","July","August","September","October","November","December"][r]+" "+["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]+" "+e.getDate()+", "+n}},umba.module.request={makeRequest:function(e,t={}){let r=t.params||"";return r&&"object"==typeof r&&(r="?"+(r=Object.keys(r).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])}).join("&")),delete t.params),t.method=t.method||"GET",fetch(e+=r,t).then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(e=>e.json())}},umba.module.request.url={getParam:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");let r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":decodeURIComponent(this.getHashParam(e).replace(/\+/g," "))},currentPage:function(){return window.location.pathname.split("/").pop()},currentUrl:function(){return window.location.href},allHash:function(){return location.hash},currentHost:function(){return window.location.hostname},projectFolder:function(){let e=location.pathname.split("/"),t="";for(let r=1;r<e.length-1;r++)t+=e[r]+"/";return t},previousPage:function(){return document.referrer},redirect:function(e){window.location=e},getHashParam:function(e,t){return t||(t=window.location.hash.substr(1)),t.split("&").reduce(function(e,t){let r=t.split("=");return e[r[0]]=r[1],e},{})[e]||void 0}},umba.module.request.data=new Proxy({},{set:function(e,t,r){if("function"!=typeof r)return e[t]=r,!0;throw new TypeError(`Cannot set ${t} to a function`)}}),umba.module.storage=function(){let e=!1,t=!1;function r(e){let t=e+"=",r=document.cookie.split(";");for(let e=0;e<r.length;e++){let n=r[e];for(;" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}function n(e){document.cookie=e+"=; Max-Age=-99999999;"}return"undefined"!=typeof Storage?t=!0:navigator.cookieEnabled&&(e=!0,t=!0),{exists:function(n){if(t)return e?null!=r(n):null!==localStorage.getItem(n);throw Error("Your browser does not support our storage method! Application will not work as expected!")},get:function(n){let o;if(t)return o=e?r(n):localStorage.getItem(n),JSON.parse(o);throw Error("Your browser does not support our storage method! Application will not work as expected!")},put:function(r,n){if(t)return n=JSON.stringify(n),e?function(e,t,r){let n="";{let e=new Date;e.setTime(e.getTime()+6048e5),n="; expires="+e.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"}(r,n):localStorage.setItem(r,n),!0;throw Error("Your browser does not support our storage method! Application will not work as expected!")},remove:function(r){if(t)return e?n(r):localStorage.removeItem(r),!0;throw Error("Your browser does not support our storage method! Application will not work as expected!")},clearAll:function(){if(t){if(e){let e=document.cookie.split(";");for(let t=0;t<e.length;t++)n(e[t].split("=")[0])}else localStorage.clear();return!0}throw Error("Your browser does not support our storage method! Application will not work as expected!")}}}(),umba.module.route=class{constructor(e){this.routes=[],this.container=document.querySelector(e),this.currentRoute=void 0,this.notfound="Route Not Found",this.clicked=void 0,this.styleKeys=[],this.currentMiddleware=void 0,this.currenthash=void 0}middleware(e,t,r){let n=this;if("string"==typeof r){let e=r;r=function(){n.navigate(e)}}else"function"!=typeof r&&(r=function(){n.navigate("/")});return this.currentMiddleware={mw:umba.middleware(e,t),fail:r},this}close(){return this.currentMiddleware=void 0,this}getHash(){let e=window.location.hash.substring(1);return"/"+this.cleanPath(e)}getCurrentRoute(){return window.location.hash.substring(1)}cleanPath(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")}check(e){this.currenthash=e;let t,r,n,o=this,i=e||o.getHash();for(let a=0,u=o.routes.length;a<u;a++)if(n={},t=o.routes[a].path.match(/:([^\/]+)/g),r=i.match(new RegExp(o.routes[a].path.replace(/:([^\/]+)/g,"([^/]*)")))){let i=o.routes[a];if(o.container.childNodes.length>0&&o.container.removeChild(o.container.firstChild),r[0]==r.input){if(i.middleware){let e=i.middleware;if(1!=e.mw())return void e.fail()}return r.shift(),r.forEach(function(e,r){n[t[r].replace(":","")]=e}),"string"==typeof i.action?umba.render(i.action,o.container,n):i.action.call({},n,o.container),void(window.location.href="#"+e)}o.currentRoute=void 0,umba.render(o.notfound,o.container)}}applyStyle(e){this.styleKeys=umba.setStyle(e)}removeStyle(){umba.removeStyle(this.styleKeys)}add(e="",t){let r=this;if("string"!=typeof e)throw Error("You must provide a valid path");if("function"!=typeof t&&"string"!=typeof t)throw Error("You must provide a valid action function or component name");return r.currentMiddleware?r.routes.push({path:e,action:t,middleware:r.currentMiddleware}):r.routes.push({path:e,action:t,middleware:void 0}),this}setActiveRoute(){let e=this,t=e.getCurrentRoute();0==t.trim().length&&(t="/");try{t!==e.clicked&&null!=e.clicked&&e.currentRoute.classList.remove("active"),e.currentRoute=document.querySelector(`[route="${t}"]`),e.currentRoute.classList.add("active")}catch(e){}}setRouteNav(){let e=this;document.querySelectorAll("[route]").forEach(t=>t.addEventListener("click",t=>{t.preventDefault(),e.currentRoute!=t.target&&(void 0!==e.currentRoute&&null!==e.currentRoute&&e.currentRoute.classList.remove("active"),e.currentRoute=t.target,e.currentRoute.classList.add("active"),e.clicked=e.currentRoute.getAttribute("route"),e.check(e.clicked))},!1))}run(e,t=!1){let r=this;return e&&"string"==typeof e&&(r.notfound=e),1==t?document.addEventListener("DOMContentLoaded",e=>{r.setRouteNav()}):r.setRouteNav(),r.setActiveRoute(),r.removeStyle(),r.check(r.getHash()),window.onhashchange=function(){r.currenthash!=r.getHash()&&(r.setActiveRoute(),r.removeStyle(),r.check(r.getHash()))},this}navigate(e){"string"==typeof e&&(window.location.href="#"+e)}},umba.module.form=function(){class e{constructor(e){let t=this;if(this.thenObj=[],this.finalObj={},this.element=void 0,"string"!=typeof e)throw Error("Must enter a valid form name");if(this.element=document.querySelector(`[name="${e}"]`)||void 0,!this.element)throw Error("Must enter a valid form name");this.element.onsubmit=function(e){umba.module.request.data={},e.preventDefault(),t.element.querySelectorAll("input, select, checkbox, textarea, button").forEach(e=>{let t=e.getAttribute("name")||e.getAttribute("id");umba.module.request.data[t]="checkbox"===e.type?e.checked:e.value||e.textContent}),t.thenObj.forEach(e=>{e(umba.module.request.data)}),t.finalObj.final&&t.finalObj.final(umba.module.request.data)}}then(e){return e&&"function"==typeof e&&this.thenObj.push(e),this}final(e){return e&&"function"==typeof e&&(this.finalObj.final=e),this}}return e.prototype.toString=function(){return JSON.stringify(umba.module.request.data)},e}(),umba.module.validate=function(e={},t={}){if("object"!=typeof e&&"object"!=typeof t)throw TypeError("Must enter valid data and rules");let r=!0,n={},o=void 0;function i(e,t){null!=e&&(t?e.classList.add("is-invalid"):t||e.classList.remove("is-invalid"))}function a(t,a,u){let s=e[u];if(null==o)try{o=document.querySelector(`[name="${u}"]`)}catch(e){}switch(t){case"max":!function(e,t){return s.length<=t}(0,a)?(n[u].push(`${u} has more chars than the max of ${a}.`),r=!1,i(o,!0)):i(o,!1);break;case"min":!function(e,t){return s.length>=t}(0,a)?(n[u].push(`${u} must be at least ${a} chars.`),r=!1,i(o,!0)):i(o,!1);break;case"type":!function(e,t){switch(a.toLowerCase()){case"string":return umba.isString(e);case"number":return umba.isNumeric(e);case"boolean":return umba.isBoolean(e);default:return!1}}(s)?(n[u].push(`${u} is expected to be of type ${a}.`),r=!1,i(o,!0)):i(o,!1);break;case"expecting":!function(e,t){switch(a.toLowerCase()){case"email":return umba.isEmail(e);case"ssn":return umba.isSocial(e);case"phone":return umba.isPhone(e);default:return!1}}(s)?(n[u].push(`${u} is expected to be a valid ${a}.`),r=!1,i(o,!0)):i(o,!1);break;case"match":!function(t,r){return umba.compareData(t,e[r])}(s,a)?(n[u].push(`${u} does not match the ${a} field.`),r=!1,i(o,!0)):i(o,!1);break;case"pattern":!function(e,t){return umba.isPatternMatch(e,t)}(s,a)?(n[u].push(`${u} is expected to be in a format as such: ${a}`),r=!1,i(o,!0)):i(o,!1)}}return function(){for(let e in t)n[e]=[],t[e].split("|").forEach(function(t){let r=t.replace(" ","").trim().split(":");a(r[0].trim(),r[1].replace(" ","").trim(),e)}),n[e].first=function(){return n[e].length>0?n[e][0]:" "},o=void 0}(),{valid:r,errors:n}},umba.datetime=umba.module.datetime,umba.request=umba.module.request,umba.url=umba.module.request.url,umba.storage=umba.module.storage,umba.route=umba.module.route,umba.form=umba.module.form,umba.validate=umba.module.validate,umba=new Proxy(window.umba,{set:function(e,t,r){throw new TypeError("You cannot alter umba")}}),Object.seal(umba),Object.freeze(umba.Component);
